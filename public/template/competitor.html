<article class="competitor">
  <header>
    <h1 ng-click="editable ? edit='title': null">{{$parent.index(question)}}. <input type="text" ng-show="edit=='title'" ng-model="question.title" ng-blur="edit='none'"/><span ng-show="edit!='title'">{{question.title}}</span></h1>
    <img src="images/logo.png"/>
  </header>
  <main ng-controller="UploadCtrl">
    <img ng-if="editable" ng-src="{{question.image}}" ngf-select="upload($file)" ngf-pattern="'image/*'"
         ngf-accept="'image/*'" ngf-max-size="20MB" ngf-min-width="400"
         ngf-resize-if="$width > 800 || $height > 800"
         ngf-resize="{width: 400}" />
    <img ng-if="!editable" ng-src="{{question.image}}" />
    <div ng-show="editable" ui-tinymce="editable" ng-model="slide.textLeft"></div>
    <div ng-show="!editable && state == 'question'" ng-bind-html="slide.textLeft"></div>
    <div ng-show="state == 'start'"><h1>Välkomna till teknikåttan</h1></div>
    <div ng-show="state == 'beforeanswer'"><h1>Rätt svar är ...</h1></div>
    <div ng-show="state == 'answer'" ng-bind-html="question.answer.text"></div>
    <div ng-show="state == 'end'"><h1>Tack för er medverkan!</h1></div>
  </main>
  <aside ng-show="editable && question.type == 'normal'" ui-tinymce="editable" ng-model="slide.textRight"></aside>
  <aside ng-show="!editable && question.type == 'normal' && state == 'question'" ng-bind-html="slide.textRight"></aside>
  <aside ng-show="editable && question.type != 'normal'">
    <ol ng-show="question.type == 'hints'">
      <li ng-repeat="hint in question.hints track by $index">
        <label>Ledtråd {{$index + 1}}: <input type="text" ng-model="question.hints[$index]" style="width: 25em;" /></label>
        <a ng-click="removeHint($index)" href="#">Ta bort</a>
      </li>
      <li><a ng-click="addHint()" href="#">Lägg till ledtråd</a></li>
    </ol>
    <ol ng-show="question.type == 'truefalse'">
      <li ng-repeat="statement in question.statements track by $index">
        <label>Påstående {{$index + 1}}: <input type="text" ng-model="question.statements[$index]" style="width: 25em;" /></label>
        <a ng-click="removeStatement($index)" href="#">Ta bort</a>
      </li>
      <li><a ng-click="addStatement()" href="#">Lägg till påstående</a></li>
    </ol>
  </aside>
  <footer>
    <time ng-click="editable ? edit='timer' : null" ng-show="slide.time > 0 && edit!='timer'">{{slide.time*1000 | date:'mm:ss'}}</time>
    <time ng-click="editable ? edit='timer' : null" ng-show="editable && slide.time <= 0 && edit!='timer'">Ingen</time>
    <section ng-show="edit=='timer'">
      <label>Tid innan svarsskärmen låses:<br><input type="number" ng-model="slide.time" min="0" max="3599" ng-blur="edit='none'"></label>
    </section>
    <ul>
      <li ng-click="editable ? edit='time' : null">
        <label>Tid:</label>
        <input type="text" ng-show="edit=='time'" ng-model="question.timeText" ng-blur="edit='none'" /><span ng-show="edit!='time'">{{question.timeText}}</span>
      </li>
      <li ng-click="editable ? edit='scoring' : null">
        <label>Poäng:</label>
        <input type="text" ng-show="edit=='scoring'" ng-model="question.scoringText" ng-blur="edit='none'" /><span ng-show="edit!='scoring'">{{question.scoringText}}</span>
      </li>
      <li ng-click="editable ? edit='maxscoring' : null">
        <label>Maxpoäng:</label>
        <input type="text" ng-show="edit=='maxscoring'" ng-model="question.maxScoringText" ng-blur="edit='none'" /><span ng-show="edit!='maxscoring'">{{question.maxScoringText}}</span>
      </li>
    </ul>
  </footer>
</article>
